var isFullview=!1;commonUI.view.detail=commonUI.view.detail||{};commonUI.view.detail.FullZoom=commonUI.view.detail.FullZoom||{};commonUI.view.detail.tabFocus=commonUI.view.detail.tabFocus||{};commonUI.view.detail.detailDescription=commonUI.view.detail.detailDescription||{};commonUI.view.detail.detailDesFunc=commonUI.view.detail.detailDesFunc||{};commonUI.view.listChange=commonUI.view.listChange||{};commonUI.view.listChange.wide=commonUI.view.listChange.wide||{};
commonUI.view.listChange.mini=commonUI.view.listChange.mini||{};commonUI.view.detail.FullZoom=function(){var a=$(".d_dragarea");commonUI.isTarget(a)||this.ready()};
commonUI.view.detail.FullZoom.prototype={ready:function(){var a=this;this.zoomLayerOpen();isFullview||(this.init(),$("._closeBtn").on("click",function(c){a.zoomLayerClose();c.preventDefault()}))},zoomLayerOpen:function(){commonUI.view.dimmOn();$(".img_drag_wrap").addClass("on")},zoomLayerClose:function(){commonUI.view.dimmOff();$(".img_drag_wrap").removeClass("on");elevateInit()},init:function(){commonUI.view.loadingbarOn();this.$area=$(".d_dragarea");this.thumWideImagesArray=thumWideImagesArray;
this.thumInit();this.dataInit(this.$LastItem.index());this.dragInit();isFullview=!0;setTimeout(function(){commonUI.view.loadingbarOff()},300)},dragInit:function(){var a=this;this.$dragTarget=this.$area.find(".d_zoom_view_select");this.$dragTarget.ready(function(){a.$dragTarget.css({opacity:"0"})});this.$dragTarget.load(function(){a.sizeChk();a.imgCW<a.areaCW&&a.imgCH<a.areaCH?commonUI.imgAlignSort(a.$dragTarget):(a.imgAlignInDrag(a.$dragTarget),a.dragEngine());$(this).animate({opacity:"1"},250)})},
imgAlignInDrag:function(a){a.css({top:($(".d_dragarea").height()-a.height())/2,left:($(".d_dragarea").width()-a.width())/2})},dragEngine:function(){var a=this.$area.width()-this.$dragTarget.width()+this.$area.offset().left,c=this.$area.height()-this.$dragTarget.height()+this.$area.offset().top,b=this.$area.offset().left,d=this.$area.offset().top;this.$dragTarget.draggable({containment:[a,c,b,d],cursor:"crosshair",addClasses:!1,scroll:!1})},dragEnd:function(){this.$dragTarget.draggable({disabled:!0})},
sizeChk:function(){this.imgCW=this.$dragTarget.width();this.imgCH=this.$dragTarget.height();this.areaCW=this.$area.width();this.areaCH=this.$area.height()},thumInit:function(){this.$thum=$(".d_drag_thum");this.$thumUl=$(".d_drag_thum_ul");this.$thumBtnLeft=this.$thum.find("._d_up");this.$thumBtnRight=this.$thum.find("._d_down");this.setThumList();this.$thumPage=this.$thumUl.find(".d_drag_thum_page");this.$thumPageCnt=this.$thumPage.length-1;this.thumItemIDX=this.thumPageIDX=0;this.$thumItem=this.$thumPage.find("a");
this.$thumPage.eq(this.thumPageIDX).addClass("on");this.$thumItem.eq(this.thumItemIDX).addClass("on");this.$LastItem=this.$thumItem.eq(this.thumPageIDX);1>this.$thumPageCnt&&(this.$thumBtnLeft.remove(),this.$thumBtnRight.remove());this.thumEvent()},setThumList:function(){for(var a=this.thumWideImagesArray,c="",b=0;b<a.length;b++)var d=b+1,c=1==d%5?c+('\n\x3cli class\x3d"d_drag_thum_page"\x3e\n\x3ca href\x3d"#"\x3e'+a[b]+"\x3c/a\x3e"):0==d%5||b+1==a.length?c+('\n\x3ca href\x3d"#"\x3e'+a[b]+"\x3c/a\x3e\n\x3c/li\x3e"):
c+('\n\x3ca href\x3d"#"\x3e'+a[b]+"\x3c/a\x3e");this.$thumUl.html(c)},thumEvent:function(){var a=this;this.$thumItem.each(function(c){var b=$(this);b.on("click",function(d){a.dragEnd();a.dataInit(c);a.thumIcoChk(b);a.dragInit();d.preventDefault();return!1})});this.$thumBtnRight.on("click",function(c){a.$thumPage.eq(a.thumPageIDX).removeClass("on");a.thumPageIDX=a.thumPageIDX+1>a.$thumPageCnt?0:a.thumPageIDX+1;a.$thumPage.eq(a.thumPageIDX).addClass("on");c.preventDefault()});this.$thumBtnLeft.on("click",
function(c){a.$thumPage.eq(a.thumPageIDX).removeClass("on");a.thumPageIDX=0>a.thumPageIDX-1?a.$thumPageCnt:a.thumPageIDX-1;a.$thumPage.eq(a.thumPageIDX).addClass("on");c.preventDefault()})},dataInit:function(a){a=$(this.thumWideImagesArray[a]).addClass("d_zoom_view_select");this.$area.html(a)},thumIcoChk:function(a){a.addClass("on");a!=this.$LastItem&&this.$LastItem.removeClass("on");this.$LastItem=a}};
commonUI.view.listChange=function(){var a=$(".d_listChangeButton");$(".d_list_change");a.on("click"," a ",function(a){$(this).hasClass("buttons_wide")?commonUI.view.listChangeWide():commonUI.view.listChangeMini();a.preventDefault()})};commonUI.view.listChangeWide=function(){$(".buttons_mini").removeClass("on");$(".buttons_wide").addClass("on");$(".d_list_change").removeClass("mini")};commonUI.view.listChangeMini=function(){$(".buttons_wide").removeClass("on");$(".buttons_mini").addClass("on");$(".d_list_change").addClass("mini")};
commonUI.view.detail.tabFocus=function(a){a=$(".goods_gnt .d_tab");if(!commonUI.isTarget(a))a.find("a").on("click",function(a){var b=$(this.hash);commonUI.isTarget(b)||(a=parseInt(b.offset().top)-56,$("body , html").animate({scrollTop:a},200,function(){b.focus()}))})};
var elevateInit=function(){var a=$("html").hasClass("ie8")?{zoomWindowPosition:1,zoomWindowHeight:400,zoomWindowWidth:400,borderSize:1}:elandmall.global.disp_mall_no==elandmall.global.kimsclub_mall_no?{zoomWindowPosition:1,zoomWindowWidth:518,zoomWindowHeight:500,zoomWindowOffetx:40,scrollZoom:!0,lensSize:100,zoomLevel:.6,borderSize:1,zoomWindowFadeIn:500,zoomWindowFadeOut:500,cursor:"crosshair",scrollZoomIncrement:.05,minZoomLevel:.5,maxZoomLevel:.8,zoomLevel:.6}:{zoomWindowPosition:1,zoomWindowWidth:518,
zoomWindowHeight:500,zoomWindowOffetx:40,scrollZoom:!0,lensSize:100,zoomLevel:.4,borderSize:1,zoomWindowFadeIn:500,zoomWindowFadeOut:500,cursor:"crosshair",scrollZoomIncrement:.05,minZoomLevel:.5,maxZoomLevel:.8,zoomLevel:.4};$("#d_elevate_img").elevateZoom(a)},elevateDestroy=function(){var a=$("#d_elevate_img");$(".zoomContainer").remove();a.removeData("elevateZoom");a.removeData("zoomImage")};
function elevateSet(){var a=$("#d_elevate_img"),c=$("#d_elevate_vdo"),b=!1;commonUI.isTarget(a)||(commonUI.isTarget(c)?(a.show(),elevateInit()):(a.hide(),c.show(),b=!0),a.on("click",function(a){elevateDestroy();productDetailFullview();return!1}),$(".elevate-gallerys"),$("#elevate_gallery").on("click",".elevate-gallerys",function(d){d.preventDefault();$(".elevate-gallerys").removeClass("on");elevateDestroy();d=$(this);d.addClass("on");if("video"===d.data("type"))c.show(),a.hide();else{b&&stopYoutube(0);
c.hide();a.show();var e=d.data("image"),f=d.data("zoom-image");d.data("view-index");a.attr({src:e,"data-zoom-image":f});elevateInit()}}))}
function elevateGalleryRoll(){var a=$("#elevate_gallery");if(!commonUI.isTarget(a)){var c=new Swiper("#elevate_gallery",{simulateTouch:!1,loop:!0});"object"!=$.type(elandmall.goods.swiper)&&(elandmall.goods.swiper={});elandmall.goods.swiper.elevate_gallery=c;a=$("#elevate_gallery");a.find(".d_btnLeft").on("click",function(a){a.preventDefault();c.swipePrev()});a.find(".d_btnRight").on("click",function(a){a.preventDefault();c.swipeNext()});a.on("keydown",".swiper-slide",function(a){var b=Math.floor($(this).attr("data-index"));
9==a.keyCode&&c.swipeTo(b,0,0)});a.on("focus",".swiper-slide",function(){var a=Math.floor($(this).attr("data-index"));c.swipeTo(a,0,0)})}}commonUI.view.detail.detailDesFunc=function(){$(".d_description").each(function(){var a=this.id;commonUI.isTarget($("#"+a))||new commonUI.view.detail.detailDescription(a)})};commonUI.view.detail.detailDescription=function(a){this.init(a)};
commonUI.view.detail.detailDescription.prototype={init:function(a){this.$target=$("#"+a);this.$swiperTarget=this.$target.find(".dt_ve_ct_thumnail");this.$targetWideImg=this.$target.find(".dt_ve_ct_img");this.$prevBtn=this.$target.find(".d_prev");this.$nextBtn=this.$target.find(".d_next");this.$wideNextBtn=this.$target.find(".d_wide_next");this.$widePrevBtn=this.$target.find(".d_wide_prev");this.$itemsLi=this.$swiperTarget.find(".d_slide li");this.$LastItemLi=this.$itemsLi.eq(0);7>this.$swiperTarget.find(".d_slide").find("li").length?
this.itemNotFuncInit():this.itemFuncInit()},itemNotFuncInit:function(){this.$prevBtn.hide();this.$nextBtn.hide();this.itemNotEvtHandler();this.$LastItemLi.find("a").trigger("mouseenter")},itemNotEvtHandler:function(){var a=this;this.$itemsLi.on("mouseenter focusin","a",function(c){var b=$(this).parent();a.engine(b);c.preventDefault()});this.$wideNextBtn.on("click",function(c){var b=parseInt(a.$LastItemLi.index()),d=a.$LastItemLi.parent().find("li").length-1,b=a.$itemsLi.eq(d<=b?b+1:0);a.engine(b);
c.preventDefault()})},itemFuncInit:function(){this.itemEvtHandler();this.$LastItemLi.find("a").trigger("mouseenter")},itemEvtHandler:function(){var a=this;this.$itemsLi.on("mouseenter focusin","a",function(c){var b=$(this).parent();a.engine(b);c.preventDefault()});this.$widePrevBtn.on("click",function(a){var b=this.$LastItemLi.index();this.$LastItemLi.parent().find("li").length-1>b&&0<=b?(b=this.$swiperTarget.find(obj).eq(b+1),detailDescriptionHover(b)):$nextBtn.click();a.preventDefault()})},engine:function(a){var c=
a.find(".dt_ve_ct_tn_img").attr("src");this.$LastItemLi.removeClass("on");a.addClass("on");this.$LastItemLi=a;this.$targetWideImg.attr({src:c})}};function productDetailFullview(){new commonUI.view.detail.FullZoom}function productDetailUI(){$(window).ready(function(){commonUI.view.detail.tabFocus();commonUI.view.listChange();elevateSet();elevateGalleryRoll();commonUI.view.detail.detailDesFunc()})};